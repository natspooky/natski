/* -----------------------------------------------
/* Author : NATSKI - natski.dev
/* MIT license : https://opensource.org/license/MIT
/* GitHub : https://github.com/natspooky/encore
/* How to use? : Check the GitHub README or visit https://natski.dev/api/encore/icon-system
/* ----------------------------------------------- */

import{IS_DATA as e}from"./dependencies/IS_DATA.js";import{fileExtention as s}from"../../dependencies/file-utils/fu.min.js";import t from"../dependencies/encoreConsole.js";class IS extends HTMLElement{static observedAttributes=["name","src","positionable"];#a;#b;constructor(){let e=super();this.#b=e,this.#a="https://natski.vercel.app/apis/encore/icon-system/dependencies/svg/?.svg"}#c(i,r,n){return e.includes(i)||r||(t({error:`The icon System icon '${i}' doesn't exist`,message:"Icon load error:"}),i="alert"),`url(${r?i:this.#a.replace("?",i)})${n?"":" no-repeat center"}`}#d(){this.#b.style.visibility=null}#e(){this.#b.style.visibility="hidden"}#f(){this.#e();let o=this.getAttribute("name"),c=this.getAttribute("src"),a=this.getAttribute("src");if(!o&&!c){t({warn:"No 'src' or 'name' provided",message:"Icon load error:"}),this.#b.style.mask=this.#c("alert",!1,a),this.#d();return}if(o){this.#b.style.mask=this.#c(o,!1,a),this.#d();return}if(c){"svg"===s(c)?this.#b.style.mask=this.#c(c,!0,a):this.#b.style.backgroundImage=this.#c(c,!0,a),this.#d();let l=new Image;l.onerror=()=>{t({message:"Icon load error:",error:`The custom icon '${c}' doesn't exist`}),this.#b.style.mask=this.#c("alert",!1,a)},l.src=c}}connectedCallback(){this.#f()}disconnectedCallback(){this.#e()}connectedMoveCallback(){this.#d()}attributeChangedCallback(){this.#f()}}export default class h{constructor(){if(!window.IconSystem){customElements.define("icon-system",IS),window.IconSystem=this;return}t({message:"Construction error:",error:"An instance of Icon System is already active"})}};