import{IS_DATA}from"./dependencies/IS_DATA.js";import{fileExtention}from"../../dependencies/file-utils/fu.js";import encoreConsole from"../dependencies/encoreConsole.js";class IS extends HTMLElement{static observedAttributes=["name","src","positionable"];#e;#s;constructor(){let e=super();this.#s=e,this.#e="https://natski.vercel.app/apis/encore/icon-system/dependencies/svg/?.svg"}#t(e,s,t){return IS_DATA.includes(e)||s||(encoreConsole({error:`The icon System icon '${e}' doesn't exist`,message:"Icon load error:"}),e="alert"),`url(${s?e:this.#e.replace("?",e)})${t?"":" no-repeat center"}`}#o(){this.#s.style.visibility=null}#n(){this.#s.style.visibility="hidden"}#i(){this.#n();const e=this.getAttribute("name"),s=this.getAttribute("src"),t=this.getAttribute("src");if(!e&&!s)return encoreConsole({warn:"No 'src' or 'name' provided",message:"Icon load error:"}),this.#s.style.mask=this.#t("alert",!1,t),void this.#o();if(e)return this.#s.style.mask=this.#t(e,!1,t),void this.#o();if(s){"svg"===fileExtention(s)?this.#s.style.mask=this.#t(s,!0,t):this.#s.style.backgroundImage=this.#t(s,!0,t),this.#o();const e=new Image;e.onerror=()=>{encoreConsole({message:"Icon load error:",error:`The custom icon '${s}' doesn't exist`}),this.#s.style.mask=this.#t("alert",!1,t)},e.src=s}}connectedCallback(){this.#i()}disconnectedCallback(){this.#n()}attributeChangedCallback(e,s,t){s!==t&&this.#i()}}export default class IconSystem{constructor(){if(!window.IconSystem)return customElements.define("icon-system",IS),void(window.IconSystem=this);encoreConsole({message:"Construction error:",error:"An instance of Icon System is already active"})}}