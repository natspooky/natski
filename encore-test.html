<!DOCTYPE html>
<html lang="en">
	<head>
		<title>test</title>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
		/>
		<meta name="theme-color" content="#010409" />
		<meta
			name="description"
			content="The home of NATSKI web tools and games"
		/>
		<meta name="keywords" content="portfolio, natspooky, natski" />
		<meta name="author" content="NATSKI" />
		<meta name="copyright" content="NATSKI" />
		<meta name="color-scheme" content="normal" />

		<link
			rel="icon"
			type="image/png"
			href="https://natski.vercel.app/icon/system_icons/favicon/favicon-96x96.png"
			sizes="96x96"
		/>
		<link
			rel="icon"
			type="image/svg+xml"
			href="https://natski.vercel.app/icon/system_icons/favicon/favicon.svg"
		/>
		<link
			rel="shortcut icon"
			href="https://natski.vercel.app/icon/system_icons/favicon/favicon.ico"
		/>
		<link
			rel="apple-touch-icon"
			sizes="180x180"
			href="https://natski.vercel.app/icon/system_icons/favicon/apple-touch-icon.png"
		/>
		<meta name="apple-mobile-web-app-title" content="Natski" />
		<link
			rel="manifest"
			href="https://natski.vercel.app/icon/system_icons/favicon/site.webmanifest"
		/>

		<meta property="og:title" content="Natski" />
		<meta
			name="og:description"
			content="The home of NATSKI web tools and games"
		/>
		<meta
			property="og:image"
			content="https://natski.vercel.app/icon/system_icons/embed/400.png"
		/>
		<meta property="og:image:width" content="400" />
		<meta property="og:image:height" content="400" />
		<meta property="og:url" content="https://natski.vercel.app" />
		<meta property="og:locale" content="en_US" />
		<meta property="og:type" content="website" />
		<meta property="og:site_name" content="NATSKI" />
		<meta name="twitter:title" content="Natski" />
		<meta
			name="twitter:description"
			content="The home of NATSKI web tools and games"
		/>
		<meta
			name="twitter:image"
			content="https://natski.vercel.app/icon/system_icons/embed/400.png"
		/>
		<meta name="twitter:site" content="@natspooky_" />
		<meta name="twitter:creator" content="@natspooky_" />
		<meta name="twitter:card" content="summary" />
		<link rel="stylesheet" type="text/css" href="./lib/css/main.css" />
		<link rel="stylesheet" type="text/css" href="./lib/css/index.css" />
		<link
			rel="stylesheet"
			type="text/css"
			media="screen and (orientation: portrait)"
			href="./lib/css/scale.css"
		/>
		<script type="module" src="./lib/js/embedded_page_scripts.js"></script>
		<script type="module" async>
			import {
				render,
				useState,
			} from './apis/encore/element-creator/ec.js';
			import { Canvas } from './apis/simple-canvas/sc.js';
			import RootLayout from './lib/layouts/rootLayout.js';
			import { Glass } from './lib/components/ui/glass.js';
			import IS from './lib/components/image_components/IS.js';
			import LinkButton from './lib/components/button_components/linkButton.js';
			import Button from './lib/components/button_components/button.js';
			import ContextMenu from './lib/components/contextMenu.js';

			function buttonScreen() {
				return useState((getter, setter) => {
					return {
						tag: 'section',
						children: [
							{
								tag: 'button',
								events: {
									click: {
										callback: () => {
											setter('useState worked!');
										},
									},
								},
								children: {
									tag: 'text',
									text: getter,
								},
							},
							useState((getter, setter) => {
								return {
									tag: 'div',
									classes: 'glass-backing',
									children: [
										{
											tag: 'button',
											events: {
												click: {
													callback: () => setter(0),
												},
											},
											classes:
												getter == 0
													? 'glass'
													: 'glass-backing',
											children: {
												tag: 'text',
												text: `getter: ${getter}`,
											},
										},
										{
											tag: 'button',
											events: {
												click: {
													callback: () => setter(1),
												},
											},
											classes:
												getter == 1
													? 'glass'
													: 'glass-backing',
											children: {
												tag: 'text',
												text: `getter: ${getter}`,
											},
										},
										{
											tag: 'button',
											events: {
												click: {
													callback: () => setter(2),
												},
											},
											classes:
												getter == 2
													? 'glass'
													: 'glass-backing',
											children: {
												tag: 'text',
												text: `the world: ${getter}`,
											},
										},
									],
								};
							}, 0),
						],
					};
				}, 'burger');
			}

			function testUseState() {
				return useState((number, setNumber) => {
					return {
						tag: 'div',
						children: [
							Glass({
								hover: true,
								active: true,
								tag: 'button',
								events: {
									click: {
										callback: () => {
											setNumber(number + 1);
										},
									},
								},
								children: {
									tag: 'text',
									text: number,
								},
							}),
							renderCanvas(),
						],
					};
				}, 0);
			}

			function renderCanvas() {
				const canvas = Canvas.create(
					'#canvas',
					{
						fps: 1000,
						autoResize: true,
						setupOnResize: true,
						diagnostics: true,
						useCursor: true,
						useTouch: true,
						detectWindowFocus: false,
					},
					'Burga',
				);

				const ctx = canvas.context;

				canvas.element.style.width = '100%';
				canvas.element.style.height = '100vh';

				const setup = () => {
					ctx.font = '120px monospace';
					ctx.fillStyle = '#000000';
					ctx.scale(0.5, 0.5);
					ctx.translate(ctx.canvas.width, ctx.canvas.height);
				};

				const append = () => {
					canvas.render();
				};

				const resize = ({ width, height }) => {
					//console.log(width, height);
				};

				const draw = () => {
					canvas.paintAll('#ffffff');

					const text = 'Simple Canvas';

					ctx.fillText(text, -((text.length / 2) * 65), 30);
					ctx.rotate(0.01);
				};

				canvas.append(append);
				canvas.setup(setup);
				canvas.resize(resize);
				canvas.draw(draw);

				return canvas.element;
			}

			render(
				'root',
				() => {
					//window.components.layout = RootLayout;

					return [testUseState()];
				},
				{
					useIcons: true,
					awaitPageLoad: false,
				},
			);
		</script>
	</head>
	<body id="root"></body>
</html>
